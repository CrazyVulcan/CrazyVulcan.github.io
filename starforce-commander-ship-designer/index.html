<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Starforce Commander SSD Designer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="layout">
    <section class="panel controls">
      <h1>Starforce Commander SSD Designer</h1>
      <p class="muted">This version mirrors your blank SSD template: left-side editing, right-side live layout preview.</p>

      <form id="ssdForm" class="stack">
        <h2>Identity</h2>
        <label>Ship Name / ID <input name="name" value="SHIP NAME / ID" /></label>
        <label>Class Label <input name="classType" value="CLASSNAME ID-class Weight Class" /></label>
        <div class="grid2">
          <label>Faction <input name="faction" value="COMMON" /></label>
          <label>Era <input name="era" value="ERA" /></label>
        </div>

        <h2>Engineering</h2>
        <div class="grid2">
          <label>Size Class <input name="move" type="number" min="0" value="3" /></label>
          <label>Acceleration <input name="vector" type="number" min="0" value="2" /></label>
          <label>Stress Damage <input name="turn" type="number" min="0" value="2" /></label>
          <label>Damage Control <input name="special" type="number" min="0" value="3" /></label>
        </div>

        <h2>Shields</h2>
        <div class="shield-stat-grid">
          <fieldset class="shield-stat-card">
            <legend>Forward</legend>
            <label>Shield <input name="shieldFwd" type="number" min="0" value="0" /></label>
            <label>Armor <input name="armorFwd" type="number" min="0" value="0" /></label>
          </fieldset>
          <fieldset class="shield-stat-card">
            <legend>Aft</legend>
            <label>Shield <input name="shieldAft" type="number" min="0" value="0" /></label>
            <label>Armor <input name="armorAft" type="number" min="0" value="0" /></label>
          </fieldset>
          <fieldset class="shield-stat-card">
            <legend>Port</legend>
            <label>Shield <input name="shieldPort" type="number" min="0" value="0" /></label>
            <label>Armor <input name="armorPort" type="number" min="0" value="0" /></label>
          </fieldset>
          <fieldset class="shield-stat-card">
            <legend>Starboard</legend>
            <label>Shield <input name="shieldStbd" type="number" min="0" value="0" /></label>
            <label>Armor <input name="armorStbd" type="number" min="0" value="0" /></label>
          </fieldset>
        </div>
        <label>Shield Generators (single value for all facings) <input name="shieldGen" type="number" min="0" value="0" /></label>
        <label>Ship Art (for shield center)
          <input name="shipArt" id="shipArt" type="file" accept="image/*" />
        </label>
        <button type="button" id="clearArtBtn" class="ghost">Clear Ship Art</button>

        <h2>Weapons (up to 4)</h2>
        <p class="muted">Each weapon supports up to 8 mounts, power circles/stops, structure, per-range dice colors, HOMING band boxes, and optional SPECIAL text (enabled by the HVY trait).</p>
        <div class="weapon-editor-list">
          <fieldset class="weapon-editor-card">
            <legend>Weapon A</legend>
            <div class="grid2">
              <label>Name <input name="wpn1Name" value="WPN NAME" /></label>
              <label>Traits (comma separated) <input name="wpn1Traits" value="HVY, FTL, NoBAT" /></label>
            </div>
            <label>Mount arcs (per mount as wedge values, e.g. <code>1,2|5,6</code>)
              <input name="wpn1MountArcs" value="1,2|5,6" />
            </label>
            <div class="grid3">
              <label>Power circles (1-6) <input name="wpn1PowerCircles" type="number" min="1" max="6" value="3" /></label>
              <label>Power stop positions (comma) <input name="wpn1PowerStops" value="2" placeholder="2,4" /></label>
              <label>Structure per mount (1-4) <input name="wpn1Structure" type="number" min="1" max="4" value="2" /></label>
            </div>
            <label>Range bands (format <code>0-4:green,5-9:black</code> or <code>0-4,green,5-9,black</code>)
              <input name="wpn1Ranges" value="0-4:green,5-9:black,10-13:red,14-16:red" />
            </label>
            <label>Dice per band (optional bonus first: <code>8,R,R|4,R,R</code>)
              <input name="wpn1Dice" value="8,R,R|4,R,R|4,R,R|2,R,R" />
            </label>
            <label>Special (shown only when HVY trait is present)
              <input name="wpn1Special" value="H(4+1), STR 2" />
            </label>
          </fieldset>

          <fieldset class="weapon-editor-card">
            <legend>Weapon B</legend>
            <div class="grid2">
              <label>Name <input name="wpn2Name" value="" placeholder="Optional" /></label>
              <label>Traits (comma separated) <input name="wpn2Traits" value="" /></label>
            </div>
            <label>Mount arcs <input name="wpn2MountArcs" value="" placeholder="1,2|5,6" /></label>
            <div class="grid3">
              <label>Power circles (1-6) <input name="wpn2PowerCircles" type="number" min="1" max="6" value="2" /></label>
              <label>Power stop positions (comma) <input name="wpn2PowerStops" value="" /></label>
              <label>Structure per mount (1-4) <input name="wpn2Structure" type="number" min="1" max="4" value="2" /></label>
            </div>
            <label>Range bands <input name="wpn2Ranges" value="" placeholder="0-6:green,7-12:black" /></label>
            <label>Dice per band <input name="wpn2Dice" value="" placeholder="R,R|Y,Y" /></label>
            <label>Special <input name="wpn2Special" value="" /></label>
          </fieldset>

          <fieldset class="weapon-editor-card">
            <legend>Weapon C</legend>
            <div class="grid2">
              <label>Name <input name="wpn3Name" value="" placeholder="Optional" /></label>
              <label>Traits (comma separated) <input name="wpn3Traits" value="" /></label>
            </div>
            <label>Mount arcs <input name="wpn3MountArcs" value="" /></label>
            <div class="grid3">
              <label>Power circles (1-6) <input name="wpn3PowerCircles" type="number" min="1" max="6" value="2" /></label>
              <label>Power stop positions (comma) <input name="wpn3PowerStops" value="" /></label>
              <label>Structure per mount (1-4) <input name="wpn3Structure" type="number" min="1" max="4" value="2" /></label>
            </div>
            <label>Range bands <input name="wpn3Ranges" value="" /></label>
            <label>Dice per band <input name="wpn3Dice" value="" /></label>
            <label>Special <input name="wpn3Special" value="" /></label>
          </fieldset>

          <fieldset class="weapon-editor-card">
            <legend>Weapon D</legend>
            <div class="grid2">
              <label>Name <input name="wpn4Name" value="" placeholder="Optional" /></label>
              <label>Traits (comma separated) <input name="wpn4Traits" value="" /></label>
            </div>
            <label>Mount arcs <input name="wpn4MountArcs" value="" /></label>
            <div class="grid3">
              <label>Power circles (1-6) <input name="wpn4PowerCircles" type="number" min="1" max="6" value="2" /></label>
              <label>Power stop positions (comma) <input name="wpn4PowerStops" value="" /></label>
              <label>Structure per mount (1-4) <input name="wpn4Structure" type="number" min="1" max="4" value="2" /></label>
            </div>
            <label>Range bands <input name="wpn4Ranges" value="" /></label>
            <label>Dice per band <input name="wpn4Dice" value="" /></label>
            <label>Special <input name="wpn4Special" value="" /></label>
          </fieldset>
        </div>

        <h2>Functions / Power / Maneuvering</h2>
        <div class="functions-editor">
          <strong>Functions Tracks</strong>
          <p class="muted">Use comma-separated values for exact power levels.<br />Free pips render as filled green dots.</p>
          <div class="functions-mini-head"><span>Function</span><span>Values</span></div>

          <div class="fn-edit-row">
            <label class="fn-edit-label">ACC/DEC</label>
            <input name="fnAccDecValues" value="1,2,3,4,5,6" />
            <label class="inline-check free-check">FREE <input name="fnAccDecFree" type="checkbox" checked /></label>
          </div>

          <div class="fn-edit-row">
            <label class="fn-edit-label">SIF/IDF</label>
            <input name="fnSifIdfValues" value="1,2,3" />
            <label class="inline-check free-check">FREE <input name="fnSifIdfFree" type="checkbox" /></label>
          </div>

          <div class="fn-edit-row fn-edit-subrow">
            <label class="inline-check">EMER <input name="fnSifIdfEmer" type="checkbox" checked /></label>
          </div>

          <div class="fn-edit-row">
            <label class="fn-edit-label">FTL</label>
            <input name="fnFtlEmpty" type="number" min="0" max="6" value="2" />
          </div>

          <div class="fn-edit-row">
            <label class="inline-check fn-edit-label">SPECIAL <input name="fnCloakEnabled" type="checkbox" /></label>
            <input name="fnCloakEmpty" type="number" min="0" max="6" value="3" />
          </div>

          <div class="fn-edit-row">
            <label class="fn-edit-label">SENSOR</label>
            <input name="fnSensorValues" value="2,4,6" />
            <label class="inline-check free-check">FREE <input name="fnSensorFree" type="checkbox" checked /></label>
          </div>

          <div class="fn-edit-row">
            <label class="fn-edit-label">GEN SYS</label>
            <input name="fnGenSysValues" value="NRM,MAX" />
            <label class="inline-check free-check">FREE <input name="fnGenSysFree" type="checkbox" /></label>
          </div>

          <div class="fn-divider"></div>

          <div class="fn-edit-row fn-wpn-row">
            <label class="inline-check fn-on-label">ON <input name="fnWpnAEnabled" type="checkbox" checked /> A</label>
            <input name="fnWpnALabel" value="A/MAT TRP" />
            <label class="inline-check free-check">FREE <input name="fnWpnAFree" type="checkbox" checked /></label>
            <input name="fnWpnAValues" value="2" placeholder="1,2,6" />
          </div>

          <div class="fn-edit-row fn-wpn-row">
            <label class="inline-check fn-on-label">ON <input name="fnWpnBEnabled" type="checkbox" checked /> B</label>
            <input name="fnWpnBLabel" value="PHASER" />
            <label class="inline-check free-check">FREE <input name="fnWpnBFree" type="checkbox" /></label>
            <input name="fnWpnBValues" value="4" placeholder="1,2,6" />
          </div>

          <div class="fn-edit-row fn-wpn-row">
            <label class="inline-check fn-on-label">ON <input name="fnWpnCEnabled" type="checkbox" /> C</label>
            <input name="fnWpnCLabel" value="WPN C" />
            <label class="inline-check free-check">FREE <input name="fnWpnCFree" type="checkbox" /></label>
            <input name="fnWpnCValues" value="" placeholder="1,2,6" />
          </div>

          <div class="fn-edit-row fn-wpn-row">
            <label class="inline-check fn-on-label">ON <input name="fnWpnDEnabled" type="checkbox" /> D</label>
            <input name="fnWpnDLabel" value="WPN D" />
            <label class="inline-check free-check">FREE <input name="fnWpnDFree" type="checkbox" /></label>
            <input name="fnWpnDValues" value="" placeholder="1,2,6" />
          </div>
        </div>
        <div class="power-system-editor">
          <strong>Power System Tracks</strong>
          <p class="muted">Set points, optional per-point box pattern (e.g. 1,2,1,2), and whether a track shows a green dot.</p>
          <div class="power-grid-head"><span>Track</span><span>Points</span><span>Boxes/Point</span><span>Pattern</span><span>Dot</span></div>
          <div class="power-grid">
            <label>L MAIN</label><input name="powerLMainPoints" type="number" min="0" value="4" /><input name="powerLMainBoxes" type="number" min="1" max="3" value="2" /><input name="powerLMainPattern" value="" placeholder="1,2,1,2" /><input name="powerLMainHasDot" type="checkbox" checked />
            <label>R MAIN</label><input name="powerRMainPoints" type="number" min="0" value="4" /><input name="powerRMainBoxes" type="number" min="1" max="3" value="2" /><input name="powerRMainPattern" value="" placeholder="1,2,1,2" /><input name="powerRMainHasDot" type="checkbox" checked />
            <label>C MAIN</label><input name="powerCMainPoints" type="number" min="0" value="0" /><input name="powerCMainBoxes" type="number" min="1" max="3" value="2" /><input name="powerCMainPattern" value="" placeholder="1,2,1,2" /><input name="powerCMainHasDot" type="checkbox" checked />
            <label>SL REAC</label><input name="powerSlReacPoints" type="number" min="0" value="1" /><input name="powerSlReacBoxes" type="number" min="1" max="3" value="2" /><input name="powerSlReacPattern" value="" placeholder="1,2,1,2" /><input name="powerSlReacHasDot" type="checkbox" checked />
            <label>AUX PWR</label><input name="powerAuxPwrPoints" type="number" min="0" value="1" /><input name="powerAuxPwrBoxes" type="number" min="1" max="3" value="2" /><input name="powerAuxPwrPattern" value="" placeholder="1,2,1,2" /><input name="powerAuxPwrHasDot" type="checkbox" checked />
            <label>BATTERY</label><input name="powerBatteryPoints" type="number" min="0" value="1" /><input name="powerBatteryBoxes" type="number" min="1" max="3" value="1" /><input name="powerBatteryPattern" value="" placeholder="1,2,1,2" /><input name="powerBatteryHasDot" type="checkbox" checked />
            <label>FTL DRIVE</label><input name="powerFtlDrivePoints" type="number" min="0" value="1" /><input name="powerFtlDriveBoxes" type="number" min="1" max="3" value="2" /><input name="powerFtlDrivePattern" value="" placeholder="1,2,1,2" /><input name="powerFtlDriveHasDot" type="checkbox" />
          </div>
        </div>
        <div class="maneuver-editor">
          <strong>Sublight Drive & Maneuvering</strong>
          <div class="grid3">
            <label>MAX ACC / PHS <input name="sublightMaxAcc" type="number" min="0" value="2" /></label>
            <label>Green RND Circles (0-3) <input name="sublightGreen" type="number" min="0" max="3" value="3" /></label>
            <label>Red RND Circles (0-3) <input name="sublightRed" type="number" min="0" max="3" value="3" /></label>
          </div>
          <div class="maneuver-grid-head"><span>Speed</span><span>DMG Stop</span><span>TURN Â°</span></div>
          <div class="maneuver-grid" id="maneuverGridInputs">
            <label>6</label><input name="sublightDmg6" type="checkbox" /><select name="sublightTurn6"><option>0</option><option selected>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>65</option></select>
            <label>5</label><input name="sublightDmg5" type="checkbox" /><select name="sublightTurn5"><option>0</option><option selected>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>65</option></select>
            <label>4</label><input name="sublightDmg4" type="checkbox" /><select name="sublightTurn4"><option>0</option><option selected>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>65</option></select>
            <label>3</label><input name="sublightDmg3" type="checkbox" /><select name="sublightTurn3"><option>0</option><option selected>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>65</option></select>
            <label>2</label><input name="sublightDmg2" type="checkbox" /><select name="sublightTurn2"><option>0</option><option selected>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>65</option></select>
            <label>1</label><input name="sublightDmg1" type="checkbox" /><select name="sublightTurn1"><option>0</option><option selected>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>65</option></select>
            <label>0</label><input name="sublightDmg0" type="checkbox" /><select name="sublightTurn0"><option>0</option><option selected>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>65</option></select>
          </div>
        </div>

        <h2>Systems (one per line)</h2>
        <label><textarea name="systems" rows="4" placeholder="SCNC:3\nSENS:4\nQTRS:2"></textarea></label>
        <div class="grid2">
          <label>Shuttle Craft <input name="shuttleCraft" type="number" min="0" value="4" /></label>
          <label>Marines Stationed <input name="marinesStationed" type="number" min="0" value="10" /></label>
        </div>

        <h2>Structure</h2>
        <div class="grid2">
          <label>Repairable Structure Boxes <input name="structureBlack" type="number" min="0" value="3" /></label>
          <label>Permanent Structure Boxes <input name="structureRed" type="number" min="0" value="12" /></label>
        </div>

        <div class="row row-actions">
          <button type="button" id="saveBtn">Save Draft</button>
          <button type="button" id="exportBtn">Export JSON</button>
          <button type="button" id="exportSvgBtn">Export SVG</button>
          <button type="button" id="exportPngBtn">Export PNG</button>
          <button type="button" id="printBtn" class="ghost">Print to Paper</button>
          <button type="button" id="clearBtn" class="ghost">Clear Drafts</button>
        </div>
      </form>
    </section>

    <section class="panel preview-wrap">
      <div class="preview-head">
        <h2>SSD Preview</h2>
        <span id="liveBadge" class="live-badge">LIVE</span>
      </div>

      <article class="ssd-template" id="ssdCard">
        <header class="template-top">
          <div class="template-ship" id="pvName">SHIP NAME / ID</div>
          <div class="template-class" id="pvClass">CLASSNAME ID-class Weight Class</div>
        </header>

        <div class="template-columns">
          <section class="col left-col">
            <h3>ENGINEERING</h3>
            <div class="eng-stats">
              <span><img id="pvSizeClassIcon" class="stat-icon" src="assets/size-class-icon.svg" alt="Size class icon" /> <b id="pvMove">0</b></span>
              <span><img class="stat-icon" src="assets/acceleration-icon.svg" alt="Acceleration icon" /> <b id="pvVector">0</b></span>
              <span><img class="stat-icon" src="assets/stress-icon.svg" alt="Stress damage icon" /> <b id="pvTurn">0</b></span>
              <span><img class="stat-icon" src="assets/damage-control-icon.svg" alt="Damage control icon" /> <b id="pvSpecial">0</b></span>
              <span class="stat-tag">PWR</span>
              <span class="stat-tag">BAT</span>
            </div>
            <div class="green-block block-functions">
              <h4><span>FUNCTIONS</span><span>POWER LEVEL</span></h4>
              <div id="pvFunctions" class="functions-preview"></div>
            </div>
            <div class="green-block block-power">
              <h4><span>POWER SYSTEM</span><span id="pvMaxPower"></span></h4>
              <div id="pvPowerTracks" class="power-track-list"></div>
            </div>
            <div class="green-block block-maneuver">
              <h4>SUBLIGHT DRIVE AND MANEUVERING</h4>
              <div id="pvManeuver" class="maneuver-preview">
                <div class="man-row man-top"><span>MAX ACC / PHS: <b id="pvMaxAcc">2</b></span><span>/ RND:</span><span id="pvRndGreen" class="rnd-circles green"></span><span id="pvRndRed" class="rnd-circles red"></span></div>
                <div class="man-row"><span>DMG:</span><span id="pvDmgStops" class="man-values dmg-values"></span></div>
                <div class="man-row"><span>SPD:</span><span id="pvSpdVals" class="man-values"></span></div>
                <div class="man-row"><span>TURN:</span><span id="pvTurnVals" class="man-values"></span></div>
              </div>
            </div>
          </section>

          <section class="col middle-col">
            <h3>SHIELDS</h3>
            <div class="shield-frame">
              <div class="shield-top">FWD SHIELD <b id="pvShieldFwd">00</b></div>
              <span class="side-label side-label-port">PORT SHIELD <b id="pvShieldPort">00</b></span>
              <span class="side-label side-label-stbd">STBD SHIELD <b id="pvShieldStbd">00</b></span>
              <div class="shield-inner">
                <div class="shield-gen-row fwd-gen-row" id="pvFwdGenBoxes"></div>
                <div class="shield-box-row" id="pvFwdShieldBoxes"></div>
                <div class="armor-box-row" id="pvFwdArmorBoxes"></div>
                <div class="shield-gen-label">SHIELD GEN <span id="pvShieldGenBlackBoxes" class="shield-gen-black-row"></span></div>
                <div class="shield-body">
                  <div class="side side-port">
                    <div class="shield-box-col" id="pvPortShieldBoxes"></div>
                    <div class="shield-gen-col" id="pvPortGenBoxes"></div>
                    <div class="armor-box-col" id="pvPortArmorBoxes"></div>
                  </div>
                  <div class="ship-art-wrap">
                    <img id="pvShipArt" class="ship-art" alt="Ship art" />
                    <div class="ship-silhouette" id="pvShipSilhouette"></div>
                  </div>
                  <div class="side side-stbd">
                    <div class="shield-box-col" id="pvStbdShieldBoxes"></div>
                    <div class="shield-gen-col" id="pvStbdGenBoxes"></div>
                    <div class="armor-box-col" id="pvStbdArmorBoxes"></div>
                  </div>
                </div>
                <div class="armor-box-row" id="pvAftArmorBoxes"></div>
                <div class="shield-box-row" id="pvAftShieldBoxes"></div>
                <div class="shield-gen-row" id="pvAftGenBoxes"></div>
              </div>
              <div class="shield-bottom">AFT SHIELD <b id="pvShieldAft">00</b></div>
            </div>
            <div class="systems-box">
              <h3>SYSTEMS</h3>
              <div class="systems-layout">
                <div id="pvSystems" class="systems-grid"></div>
                <div class="systems-side">
                  <div class="crew-box"><span class="crew-icon"><img src="assets/shuttle-craft-icon.svg" alt="Shuttle craft" class="crew-img" /></span><b id="pvShuttleCraft">4</b></div>
                  <div class="crew-box"><span class="crew-icon"><img src="assets/marines-icon.svg" alt="Marines stationed" class="crew-img" /></span><b id="pvMarines">10</b></div>
                </div>
              </div>
            </div>
          </section>

          <section class="col right-col">
            <h3>WEAPONS</h3>
            <div class="weapon-slot" id="pvWpn1Slot"><div class="slot-title" id="pvWpn1Title">WPN NAME TYP</div><div class="slot-body" id="pvWpn1Body"></div></div>
            <div class="weapon-slot" id="pvWpn2Slot"><div class="slot-title" id="pvWpn2Title">WPN NAME TYP</div><div class="slot-body" id="pvWpn2Body"></div></div>
            <div class="weapon-slot" id="pvWpn3Slot"><div class="slot-title" id="pvWpn3Title">WPN NAME TYP</div><div class="slot-body" id="pvWpn3Body"></div></div>
            <div class="weapon-slot" id="pvWpn4Slot"><div class="slot-title" id="pvWpn4Title">WPN NAME TYP</div><div class="slot-body" id="pvWpn4Body"></div></div>
          </section>
        </div>

        <footer class="template-bottom">
          <span class="structure">STRUCTURE</span>
          <span class="structure-track" id="pvStructureTrack">
            <span class="structure-row" id="pvStructureBoxes"></span>
          </span>
          <span class="footer-tags">
            <span id="pvFaction">COMMON</span>
            <span id="pvEra">ERA</span>
          </span>
        </footer>
      </article>

      <h3>Saved Drafts</h3>
      <ul id="drafts"></ul>
      <h3>Current JSON</h3>
      <pre id="jsonPreview"></pre>
    </section>
  </main>

  <script src="app.js" type="module"></script>
</body>
</html>
